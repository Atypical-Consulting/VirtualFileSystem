@import "tailwindcss";
@source "../../Components/**/*.razor";

/* ── Theme ── */
@theme {
  --color-cloud-50: #eff6ff;
  --color-cloud-100: #dbeafe;
  --color-cloud-200: #bfdbfe;
  --color-cloud-300: #93c5fd;
  --color-cloud-400: #60a5fa;
  --color-cloud-500: #3b82f6;
  --color-cloud-600: #2563eb;
  --color-cloud-700: #1d4ed8;
  --color-cloud-800: #1e40af;
  --color-cloud-900: #1e3a8a;
  --color-cloud-950: #172554;

  --color-nav-bg: #fafafa;
  --color-nav-hover: #f0f0f0;
  --color-nav-active: #e5f3ff;
  --color-nav-border: #e5e5e5;

  --color-file-hover: #f5f5f5;
  --color-file-selected: #e5f3ff;
  --color-file-drag: #dbeafe;

  --font-sans: 'Inter', 'Segoe UI', system-ui, sans-serif;

  --spacing-sidebar: 240px;
  --spacing-preview: 320px;
  --spacing-topbar: 48px;

  --animate-fade-in: fade-in 0.2s ease-out;
  --animate-slide-in: slide-in 0.2s ease-out;
  --animate-slide-up: slide-up 0.2s ease-out;
}

@keyframes fade-in {
  0% { opacity: 0; }
  100% { opacity: 1; }
}

@keyframes slide-in {
  0% { transform: translateX(-10px); opacity: 0; }
  100% { transform: translateX(0); opacity: 1; }
}

@keyframes slide-up {
  0% { transform: translateY(10px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}

/* ── Base ── */
@layer base {
  html {
    @apply antialiased;
  }

  body {
    @apply bg-white text-gray-900 font-sans;
  }
}

/* ── Utilities (classes referenced by @apply in other classes) ── */
@utility focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-cloud-500 focus:ring-offset-2;
}

@utility btn {
  @apply inline-flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-md transition-colors duration-150 focus-ring disabled:opacity-50 disabled:cursor-not-allowed;
}

@utility nav-item {
  @apply flex items-center gap-3 px-3 py-2 text-sm text-gray-700 rounded-md hover:bg-gray-100 transition-colors duration-150 cursor-pointer;
}

@utility toast {
  @apply flex items-center gap-3 p-4 rounded-lg shadow-lg border animate-slide-up;
}

/* ── Components ── */
@layer components {
  /* Button variants */
  .btn-secondary {
    @apply btn bg-gray-100 text-gray-700 hover:bg-gray-200 active:bg-gray-300;
  }

  .btn-ghost {
    @apply btn bg-transparent text-gray-700 hover:bg-gray-100 active:bg-gray-200;
  }

  .btn-icon {
    @apply inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:bg-gray-100 active:bg-gray-200 transition-colors duration-150 focus-ring;
  }

  /* Input styles */
  .input {
    @apply block w-full px-3 py-2 text-sm border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-cloud-500 focus:border-cloud-500;
  }

  /* Card styles */
  .card {
    @apply bg-white rounded-lg border border-gray-200 shadow-sm;
  }

  /* Sidebar navigation */
  .nav-item-active {
    @apply nav-item bg-cloud-50 text-cloud-700 font-medium;
  }

  /* File item styles */
  .file-item {
    @apply flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-all duration-150;
  }

  .file-item:hover {
    @apply bg-file-hover;
  }

  /* Breadcrumb */
  .breadcrumb-item {
    @apply text-gray-500 hover:text-gray-900 hover:underline cursor-pointer;
  }

  .breadcrumb-item-active {
    @apply text-gray-900 font-medium;
  }

  .breadcrumb-separator {
    @apply text-gray-400;
  }

  /* Checkbox */
  .checkbox {
    @apply h-4 w-4 rounded border-gray-300 text-cloud-600 focus:ring-cloud-500;
  }

  /* Toast notifications */
  .toast-success {
    @apply toast bg-green-50 border-green-200 text-green-800;
  }

  .toast-error {
    @apply toast bg-red-50 border-red-200 text-red-800;
  }

  .toast-warning {
    @apply toast bg-yellow-50 border-yellow-200 text-yellow-800;
  }

  .toast-info {
    @apply toast bg-blue-50 border-blue-200 text-blue-800;
  }

  /* Modal/Dialog */
  .modal-backdrop {
    @apply fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-fade-in;
  }

  .modal-content {
    @apply bg-white rounded-xl shadow-xl max-w-md w-full mx-4 animate-slide-up;
  }

  .modal-header {
    @apply flex items-center justify-between p-4 border-b border-gray-200;
  }

  .modal-body {
    @apply p-4;
  }

  .modal-footer {
    @apply flex items-center justify-end gap-2 p-4 border-t border-gray-200;
  }

  /* Context menu */
  .context-menu {
    @apply absolute z-50 min-w-48 py-1 bg-white rounded-lg shadow-lg border border-gray-200 animate-fade-in;
  }

  .context-menu-item {
    @apply flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer;
  }

  .context-menu-item-danger {
    @apply flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 cursor-pointer;
  }

  .context-menu-separator {
    @apply my-1 border-t border-gray-200;
  }

  /* Storage meter */
  .storage-meter {
    @apply h-2 bg-gray-200 rounded-full overflow-hidden;
  }

  .storage-meter-fill {
    @apply h-full bg-cloud-500 transition-all duration-300;
  }

  /* Empty state */
  .empty-state {
    @apply flex flex-col items-center justify-center py-16 text-center;
  }

  .empty-state-icon {
    @apply w-16 h-16 text-gray-300 mb-4;
  }

  .empty-state-title {
    @apply text-lg font-medium text-gray-900 mb-1;
  }

  .empty-state-description {
    @apply text-sm text-gray-500;
  }

  /* Scrollbar styling */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-2;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full hover:bg-gray-400;
  }
}

/* ── Standalone styles ── */

/* File item highlight animation for undo/redo feedback */
.file-item-highlight {
  animation: highlightPulse 2s ease-out;
}

@keyframes highlightPulse {
  0% {
    background-color: rgb(187 247 208);
    box-shadow: 0 0 0 2px rgb(134 239 172);
  }
  100% {
    background-color: transparent;
    box-shadow: none;
  }
}

/* Drawer slide-in animation from right */
.animate-slide-in-right {
  animation: slideInRight 0.2s ease-out;
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Blazor error boundary */
.blazor-error-boundary {
  background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIG92ZXJmbG93PSJoaWRkZW4iPjxkZWZzPjxjbGlwUGF0aCBpZD0iY2xpcDAiPjxyZWN0IHg9IjIzNSIgeT0iNTEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI0OSIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMzUgLTUxKSI+PHBhdGggZD0iTTI2My41MDYgNTFDMjY0LjcxNyA1MSAyNjUuODEzIDUxLjQ4MzcgMjY2LjYwNiA1Mi4yNjU4TDI2Ny4wNTIgNTIuNzk4NyAyNjcuNTM5IDUzLjYyODMgMjkwLjE4NSA5Mi4xODMxIDI5MC41NDUgOTIuNzk1IDI5MC42NTYgOTIuOTk2QzI5MC44NzcgOTMuNTEzIDI5MSA5NC4wODE1IDI5MSA5NC42NzgyIDI5MSA5Ny4wNjUxIDI4OS4wMzggOTkgMjg2LjYxNyA5OUwyNDAuMzgzIDk5QzIzNy45NjMgOTkgMjM2IDk3LjA2NTEgMjM2IDk0LjY3ODIgMjM2IDk0LjM3OTkgMjM2LjAzMSA5NC4wODg2IDIzNi4wODkgOTMuODA3MkwyMzYuMzM4IDkzLjAxNjIgMjM2Ljg1OCA5Mi4xMzE0IDI1OS40NzMgNTMuNjI5NCAyNTkuOTYxIDUyLjc5ODUgMjYwLjQwNyA1Mi4yNjU4QzI2MS4yIDUxLjQ4MzcgMjYyLjI5NiA1MSAyNjMuNTA2IDUxWk0yNjMuNTg2IDY2LjAxODNDMjYwLjczNyA2Ni4wMTgzIDI1OS4zMTMgNjcuMTI0NSAyNTkuMzEzIDY5LjMzNyAyNTkuMzEzIDY5LjYxMDIgMjU5LjMzMiA2OS44NjA4IDI1OS4zNzEgNzAuMDg4N0wyNjEuNzk1IDg0LjAxNjEgMjY1LjM4IDg0LjAxNjEgMjY3LjgyMSA2OS43NDc1QzI2Ny44NiA2OS43MzA5IDI2Ny44NzkgNjkuNTg3NyAyNjcuODc5IDY5LjMxNzkgMjY3Ljg3OSA2Ny4xMTgyIDI2Ni40NDggNjYuMDE4MyAyNjMuNTg2IDY2LjAxODNaTTI2My41NzYgODYuMDU0N0MyNjEuMDQ5IDg2LjA1NDcgMjU5Ljc4NiA4Ny4zMDA1IDI1OS43ODYgODkuNzkyMSAyNTkuNzg2IDkyLjI4MzcgMjYxLjA0OSA5My41Mjk1IDI2My41NzYgOTMuNTI5NSAyNjYuMTE2IDkzLjUyOTUgMjY3LjM4NyA5Mi4yODM3IDI2Ny4zODcgODkuNzkyMSAyNjcuMzg3IDg3LjMwMDUgMjY2LjExNiA4Ni4wNTQ3IDI2My41NzYgODYuMDU0N1oiIGZpbGw9IiNGRkU1MDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvZz48L3N2Zz4=) no-repeat 1rem/1.8rem, #b32121;
  padding: 1rem 1rem 1rem 3.7rem;
  color: white;
}

.blazor-error-boundary::after {
  content: "An error has occurred.";
}
